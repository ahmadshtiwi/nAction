<div class="row">
    <div class="col-md-4 col-12 d-flex align-items-center">
        <label class="text-black required-label me-2" for="fromCity">{{'Resource Name'}}</label>
        <ng-select name="maxDeliveryDate" [placeholder]="'CHOOSE'" required class="bg-dark-primary border text-primary flex-grow-1"
            [(ngModel)]="ProductivityPagination.employeeId" [items]="users"
            (ngModelChange)="getDashboardData()" [bindLabel]="'fullName'" [bindValue]="'id'"
            [multiple]="false">
        </ng-select>
    </div>
    
    @if (ProductivityPagination.employeeId) {
        <div class="col-md-4 col-12 d-flex align-items-center">
            <label class="text-black required-label me-2" for="fromDate">{{'From Date'}}</label>
            <input type="date" class="form-control flex-grow-1 w-75" name="fromDate" [(ngModel)]="ProductivityPagination.fromDate"
                (ngModelChange)="getDashboardData() ; ProductivityPagination.pageNumber = 1; efficiencyPagination.pageNumber = 1; resourceAllocationPagination.pageNumber = 1; ">
        </div>
        <div class="col-md-4 col-12 d-flex align-items-center">
            <label class="text-black required-label me-2" for="toDate">{{'To Date'}}</label>
            <input type="date" class="form-control flex-grow-1 w-75" name="toDate" [(ngModel)]="ProductivityPagination.toDate"
                (ngModelChange)="getDashboardData()">
        </div>    

   

 

 
    }

    @if(ProductivityData){

        <div class="row mt-2">
         
          
            <!-- الكرت الجانبي -->
            <div class="col-md-2 mt-3 mt-md-0 ahmad">
              <div class="card shadow-sm">
                <div class="card-body row m-0 p-0">
                  <div class="col-12 p-0">
                    <div class="card-summary row p-0 m-0">
                      <div class="col-12 p-0"><h5 class="card-title text-center">{{ 'Productivity' }}</h5></div>
                      <div class="col-12 p-0"><h5 class="card-title text-center fw-bold tex">{{ productivityCard.overallProductivity }}%</h5></div>
                      

                          <div class="col-8 text-start"><strong>{{ 'Days' }}:</strong></div>
                          <div class="col-4 text-start p-0">{{productivityCard.totalDays}}</div>
                          
                          <div class="col-8 text-start"><strong>{{ 'Works Days' }}:</strong></div>
                          <div class="col-4 text-start p-0">{{productivityCard.totalWorksDays}}</div>
                          
                          <div class="col-8 text-start"><strong>{{ 'Official Hours' }}:</strong></div>
                          <div class="col-4 text-start p-0">{{productivityCard.officialHours}}</div>
                          
                          <div class="col-8 text-start"><strong>{{ 'Actual Hours' }}:</strong></div>
                          <div class="col-4 text-start p-0">{{productivityCard.actualHours}}</div>
                          
                          <div class="col-8 text-start"><strong>{{ 'Daily Avg' }}:</strong></div>
                          <div class="col-4 text-start p-0">{{productivityCard.dailyAverage}}</div>

                          <div class="col-8 text-start"><strong>{{ 'Tasks' }}:</strong></div>
                          <div class="col-4 text-start p-0">{{productivityCard.totalDistinctTasks}}</div>
                          
                    </div>
                  </div>
                </div>
              </div>
            </div>

               <!-- جدول الإنتاجية -->
               <div class="col-md-10">
                <app-table 
                  [tableData]="ProductivityData" 
                  [collectionSize]="ProductivityPagination.totalCount" 
                  [page]="ProductivityPagination.pageNumber" 
                  [pageSize]="ProductivityPagination.pageSize"
                  [tableHeaderTitle]="ProductivityHeaderTitle" 
                  [removeAddButton]="true" 
                  [viewUnsubmittedRequestButton]="false"
                  [tableHeaderButton]="'Create new task'" 
                  [tableHeaders]="tableHeaders" 
                  [displayColumns]="productivityColumns"
                  [viewLog]="false" 
                  [isViewOnly]="false" 
                  [removeActions]="true" 
                  [removeFilter]="true"
                  [unsubmittedComponentRouting]="'/pages/assignment-managment/unsubmitted-assignment-requests'"
                  (pageChangeEvent)="performanceNextPage($event)" 
                  (openFilterModalEvent)="openModal(content)">
                </app-table>
              </div>
          </div>

          
  

    <hr class="my-1">

    <div class="row mt-2">
      
      
        <!-- كرت الـ Efficiency -->
        <div class="col-md-2 mt-3 mt-md-0">
          <div class="card shadow-sm">
            <div class="card-body row m-0 p-0">
              <div class="col-12 p-0">
                <div class="card-summary row p-0 m-0">
                  <div class="col-12 p-0">
                </div>
                <h5 class="card-title text-center">{{ 'Efficiency' }}</h5>
                <h5 class="card-title text-center fw-bold">{{ efficiencyCard.overallEfficiency }}%</h5>
      
                  <div class="col-8 text-start"><strong>{{ 'Tasks' }}:</strong></div>
                  <div class="col-4 text-start p-0">{{ efficiencyCard.totalTasks }}</div>
      
                  <div class="col-8 text-start"><strong>{{ 'Est Hours' }}:</strong></div>
                  <div class="col-4 text-start p-0">{{ efficiencyCard.totalExpectedDuration }}</div>
      
                  <div class="col-8 text-start"><strong>{{ 'Actual Hours' }}:</strong></div>
                  <div class="col-4 text-start p-0">{{ efficiencyCard.totalActualDuration }}</div>
      
                  <div class="col-8 text-start"><strong>{{ 'Deadline Score' }}:</strong></div>
                  <div class="col-4 text-start p-0">{{ efficiencyCard.deadlineScore }}</div>
                </div>
              </div>
            </div>
          </div>
        </div>
          <!-- جدول الـ Efficiency -->
          <div class="col-md-10">
            <app-table [tableData]="efficiencyData" [collectionSize]="efficiencyPagination.totalCount" [page]="efficiencyPagination.pageNumber" [pageSize]="efficiencyPagination.pageSize"
            [tableHeaderTitle]="efficiencyHeaderTitle" [removeAddButton]="false" [viewUnsubmittedRequestButton]="false"
            [tableHeaderButton]="'Create new task'" [tableHeaders]="tableHeaders2" [displayColumns]="efficiencyColumns"
            [viewLog]="false" [isViewOnly]="false" [removeActions]="true" [viewUnsubmittedRequestButton]="false"
            [unsubmittedComponentRouting]="'/pages/assignment-managment/unsubmitted-assignment-requests'"
            [removeFilter]="true" (pageChangeEvent)="efficiencyNextPage($event)" [removeAddButton]="true"
            (openFilterModalEvent)="openModal(content)">
        </app-table>


        </div>
      </div>

    <hr class="my-1">

    <div class="row mt-2">
     
      
        <!-- كرت Projects -->
        <div class="col-md-2 mt-3 mt-md-0">
          <div class="card shadow-sm" style="width: 100%;">
            <div class="card-body row m-0 p-0">
              <div class="col-12 p-0">
                <div class="card-summary row p-0 m-0">
                  <div class="col-12 p-0">
                    <h5 class="card-title text-center">{{ 'Projects' }}</h5>
                    <h5 class="card-title text-center fw-bold">{{ productCard.projectsCount }}</h5>
                  </div>
      
                  <div class="col-8 text-start"><strong>{{ 'Allocated Time' }}:</strong></div>
                  <div class="col-4 text-start p-0">{{ productCard.totalAllocatedTime }}</div>
      
                  <div class="col-8 text-start"><strong>{{ 'Total Tasks' }}:</strong></div>
                  <div class="col-4 text-start p-0">{{ productCard.totalTasks }}</div>
      
                  <div class="col-8 text-start"><strong>{{ 'Total Cost' }}:</strong></div>
                  <div class="col-4 text-start p-0">{{ productCard.totalCost }}</div>
                </div>
              </div>
            </div>
          </div>
        </div>
           <!-- جدول Resource Allocation -->
           <div class="col-md-10">
            <app-table 
              [tableData]="resourceAllocation" 
              [collectionSize]="resourceAllocationPagination.totalCount" 
              [page]="resourceAllocationPagination.pageNumber" 
              [pageSize]="resourceAllocationPagination.pageSize"
              [tableHeaderTitle]="allocationHeaderTitle" 
              [removeAddButton]="true" 
              [viewUnsubmittedRequestButton]="false"
              [tableHeaders]="tableHeaders3" 
              [displayColumns]="resourceAllocationColumns"
              [viewLog]="false" 
              [isViewOnly]="false" 
              [removeActions]="true" 
              [removeFilter]="true"
              [unsubmittedComponentRouting]="'/pages/assignment-managment/unsubmitted-assignment-requests'"
              (pageChangeEvent)="resourceAllocationNextPage($event)" 
              (openFilterModalEvent)="openModal(content)">
            </app-table>
          </div>
      </div>
      

    }@else {
    <div class="col-12 p-3 text-center">
        no data found
    </div>
    }


</div>